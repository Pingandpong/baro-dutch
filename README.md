# 바로더치

GEMINI.md 베이스 · RN + Firebase + Gluestack UI

## 앱 개요 및 핵심 기능

* **핵심 JTBD:** “영수증을 **찍기만** 하면 항목·가격을 자동 추출하고, 사람별 금액을 **몇 초 만에** 나눠 공유하고 싶다.”
* **최소 기능:**
  1. **영수증 사진 OCR** → 항목·가격 자동 인식(통화/세금/봉사료 감지)
  2. **사람 배정 UI** → 균등/비율/개별 모드, 항목을 A/B/C에 드래그
  3. **정산 결과 생성** → 사람별 금액·송금 메모 복사, **공유 링크**(영/한 자동)
  4. 수수료/할인/배달비 분배 규칙 토글
  5. (옵션) **정산 요청 리마인더**(알림 1회)

## 🎯 사용 플로우 (3 Step)

1. **영수증 사진을 찍고**  
2. **드래그로 금액을 할당해요**  
3. **친구에게 링크 보내고 정산해요**  

> 인트로 화면에서는 위 3단계를 간단히 보여주고 “다음” 버튼으로 시작합니다.

## 🚀 시작하기

프로젝트를 로컬 환경에서 실행하려면 다음 단계를 따르세요.

### 1. 의존성 설치

```bash
npm install
```

### 2. 개발 서버 실행

```bash
npm run dev
```

## 기술 스택

* **코어 프레임워크**: React Native + `react-native-granite` (토스 미니앱 전용 프레임워크)
* **UI 라이브러리**: **TDS (Toss Design System)** React Native 패키지 (토스 디자인 시스템 적용)
* **라우팅**: `react-native-granite` 기반의 파일 시스템 라우팅
* **카메라/갤러리**: `react-native-image-picker` (네이티브 설정 필요)
* **OCR 및 데이터 추출**: **OpenAI Vision API (GPT-4o)** 또는 **Google Cloud Vision API**
* **상태 관리**: `zustand`
* **서버/DB**: **Firebase** (Firestore, Functions)
* **유틸리티**: `dayjs` (날짜 처리)

## 🎨 UX 가이드

- **인트로**: 3단계 프로세스 안내 (간단히 보여주고 ‘다음’ 버튼)  
- **메인**: 인원 입력 → 이름 칩 추가 → 영수증 업로드 버튼  
- **배분**: 항목/카테고리 카드를 사람 칩으로 드래그 (균등/비율/개별 모드 지원)  
- **결과**: 인원별 금액 카드 + 공유/송금 버튼  

## 📚 상세 개발 가이드

상세한 개발 순서 및 문서는 [DEVELOPMENT_GUIDE.md](DEVELOPMENT_GUIDE.md) 파일에서 확인하실 수 있습니다.

---

# 📱 앱 개요
영수증을 촬영하거나 업로드하면 OCR로 자동 인식 → 항목별로 인원에게 배정 → 정산 금액 계산 및 공유 → 히스토리 저장.  
**핵심 가치**: 번거로운 정산을 자동화해 빠르고 정확하게 처리.

---

# 🔄 화면 플로우
1. **온보딩** – 앱 소개 및 시작 버튼  
2. **인원 수 입력** – 함께 정산할 인원 수 선택  
3. **업로드** – 촬영 / 앨범 / 수동 입력 선택  
4. **OCR 로딩** – 인식 진행 화면  
5. **OCR 오류** – 실패 시 재시도 / 수동 입력 분기  
6. **항목 배정 (섹션 리스트)** – 음식/주류/음료/기타 단위로 배정  
7. **섹션 상세보기** – 메뉴별로 인원 배정/비활성화 가능  
8. **정산 확인** – 인원별 금액 합계 표시  
9. **공유하기** – 카톡/링크/WhatsApp 등 공유  
10. **히스토리** – 과거 정산 내역 리스트  
11. **히스토리 상세** – 지난 정산의 항목/참여자/금액 상세 보기  

---

# 🎛️ 네비게이션 구조
```ts
type Routes =
  | "Onboarding"
  | "PeopleCount"
  | "UploadReceipt"
  | "OcrLoading"
  | "OcrError"
  | "AssignSections"
  | "SectionDetail"
  | "Review"
  | "Share"
  | "History"
  | "HistoryDetail";
```

---

# 📊 정산 규칙
- 항목 금액 ÷ 배정된 인원 수 = 1인당 금액  
- 반올림: **10원 단위 반올림**  
- 비활성화 항목은 합계에서 제외  

---

# 🎨 디자인 가이드 (TDS 기반)
- **디자인 시스템**: Toss Design System (TDS) 컴포넌트 우선 사용  
  - 버튼: Primary/Secondary/Outline 일관성 유지  
  - 칩(Chip): 사람 배정용 → 기본은 Outline, 선택 시 Primary  
  - 카드(Card): 항목/섹션 리스트는 Card 패턴으로 구성  
  - Typography: Title(16~18), Body(14), Caption(12) 규격 맞춤  
  - 색상: TDS 컬러 팔레트 (Neutral/Primary/Destructive) 사용  
- **레이아웃**: 모바일 기준 (320px ~ 375px) / 하단 CTA 버튼 고정  
- **상호작용**:  
  - 섹션 배정 = 해당 섹션 모든 항목 일괄 토글  
  - 상세보기 = 항목별 배정 및 비활성화  
  - 오류/예외 = Alert 스타일로 안내  

---

# 🧪 체크리스트
- 권한 거부 시 업로드 진입 불가 안내  
- OCR 실패 분기 정상 동작  
- 배정 인원 변경 시 총합 보존  
- 카카오톡 공유/링크 복사 정상 동작  
- 히스토리 상세 열람 가능  

---